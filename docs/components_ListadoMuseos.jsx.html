<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/ListadoMuseos.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/ListadoMuseos.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Componente funcional que muestra una tabla con el listado de museos.
 * Incluye opciones para editar y eliminar museos, y exportar a PDF.
 * @module ListadoMuseos
 */
import { useState, useEffect } from "react";
import Table from "@mui/material/Table";
import TableBody from "@mui/material/TableBody";
import TableCell from "@mui/material/TableCell";
import TableContainer from "@mui/material/TableContainer";
import TableHead from "@mui/material/TableHead";
import TableRow from "@mui/material/TableRow";
import Paper from "@mui/material/Paper";
import Typography from "@mui/material/Typography";
import Chip from "@mui/material/Chip";
import PrintIcon from "@mui/icons-material/Print";

import BotonBorrar from "./BotonBorrar";
import BotonEditar from "./BotonEditar";
import Fab from "@mui/material/Fab";
import { Box } from "@mui/material";
import generatePDF from "../utils/generatePDF";

/**
 * Componente principal para mostrar el listado de museos.
 * Utiliza estados para gestionar los datos, errores y renderizado de la tabla.
 * @returns {JSX.Element} Renderizado de la tabla de museos y controles asociados.
 */
function ListadoMuseos() {
  /**
   * Datos de los museos obtenidos desde la API.
   * @type {Array&lt;Object>}
   */
  const [datos, setDatos] = useState([]);
  /**
   * Mensaje de error en caso de fallo al obtener los datos.
   * @type {string|null}
   */
  const [error, setError] = useState(null);

  /**
   * Hook de efecto para obtener los datos de los museos al cargar el componente.
   * Llama a la función asíncrona fetchMuseos una sola vez al montar el componente.
   */
  useEffect(() => {
    /**
     * Función asíncrona para obtener los datos de los museos desde la API.
     * @async
     * @function
     * @returns {Promise&lt;void>}
     */
    async function fetchMuseos() {
      try {
        let response = await fetch("http://localhost:3000/api/museums/");
        if (response.ok) {
          let datosMuseos = await response.json();
          setDatos(datosMuseos.datos);
          setError(null);
        } else {
          setError("Respuesta errónea del servidor.");
          setDatos([]);
        }
      } catch (e) {
        setError("No se pudo conectar al servidor: " + e.toString());
        setDatos([]);
      }
    }
    fetchMuseos();
  }, []);

  // Renderizado de mensaje de error si ocurre algún problema al obtener los datos
  if (error != null) {
    return (
      &lt;Typography variant="h5" align="center" sx={{ mt: 3 }}>
        {error}
      &lt;/Typography>
    );
  }

  // Renderizado de mensaje si no hay datos disponibles
  if (!datos || datos.length === 0) {
    return (
      &lt;>
        &lt;Typography variant="h5" align="center" sx={{ mt: 3 }}>
          No hay datos disponibles
        &lt;/Typography>
      &lt;/>
    );
  }

  // Renderizado principal de la tabla de museos y controles
  return (
    &lt;>
      &lt;Typography variant="h4" align="center" color="primary" sx={{ my: 3 }}>
        Listado de museos
      &lt;/Typography>

      &lt;Box id="pdf-content">
        &lt;TableContainer component={Paper}>
          &lt;Table stickyHeader aria-label="tabla museos">
            &lt;TableHead>
              &lt;TableRow>
                &lt;TableCell>Nombre&lt;/TableCell>
                &lt;TableCell>Ciudad&lt;/TableCell>
                &lt;TableCell align="right">Presupuesto (€)&lt;/TableCell>
                &lt;TableCell align="center">Público&lt;/TableCell>
                &lt;TableCell align="center">Fecha apertura&lt;/TableCell>
                {/* Añadimos className="omitir-pdf" a los encabezados para excluirlos del PDF */}
                &lt;TableCell align="center" className="omitir-pdf">
                  Borrar
                &lt;/TableCell>
                &lt;TableCell align="center" className="omitir-pdf">
                  Editar
                &lt;/TableCell>
              &lt;/TableRow>
            &lt;/TableHead>

            &lt;TableBody>
              {datos.map((row) => (
                &lt;TableRow key={row.museum_id}>
                  &lt;TableCell>{row.name}&lt;/TableCell>
                  &lt;TableCell>{row.city}&lt;/TableCell>
                  &lt;TableCell align="right">{row.annual_budget}&lt;/TableCell>
                  &lt;TableCell align="center">
                    &lt;Chip label={row.is_public ? "Si" : "No"} color={row.is_public ? "success" : "default"} size="small" />
                  &lt;/TableCell>
                  &lt;TableCell align="center">{row.opening_date}&lt;/TableCell>

                  {/* Añadimos className="omitir-pdf" a las celdas de los botones para excluirlos del PDF */}
                  &lt;TableCell align="center" className="omitir-pdf">
                    &lt;BotonBorrar ruta="/museums/" id={row.museum_id} />
                  &lt;/TableCell>

                  &lt;TableCell align="center" className="omitir-pdf">
                    &lt;BotonEditar ruta="/museums/editar/" id={row.museum_id} />
                  &lt;/TableCell>
                &lt;/TableRow>
              ))}
            &lt;/TableBody>
          &lt;/Table>
        &lt;/TableContainer>
      &lt;/Box>

      &lt;Fab
        color="secondary"
        aria-label="imprimir"
        onClick={() => generatePDF("pdf-content", "museos")}
        sx={{
          position: "fixed",
          top: 85,
          right: 20,
        }}
      >
        &lt;PrintIcon />
      &lt;/Fab>
    &lt;/>
  );
}

export default ListadoMuseos;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-AltaMuseo.html">AltaMuseo</a></li><li><a href="module-AltaSala.html">AltaSala</a></li><li><a href="module-BotonBorrar.html">BotonBorrar</a></li><li><a href="module-BotonEditar.html">BotonEditar</a></li><li><a href="module-BusquedaMuseos.html">BusquedaMuseos</a></li><li><a href="module-BusquedaMuseosFecha.html">BusquedaMuseosFecha</a></li><li><a href="module-BusquedaMuseosPDF.html">BusquedaMuseosPDF</a></li><li><a href="module-BusquedaSalas.html">BusquedaSalas</a></li><li><a href="module-EditarMuseo.html">EditarMuseo</a></li><li><a href="module-EditarSala.html">EditarSala</a></li><li><a href="module-Footer.html">Footer</a></li><li><a href="module-GraficaMuseos.html">GraficaMuseos</a></li><li><a href="module-Inicio.html">Inicio</a></li><li><a href="module-LandingPage.html">LandingPage</a></li><li><a href="module-ListadoMuseos.html">ListadoMuseos</a></li><li><a href="module-ListadoSalas.html">ListadoSalas</a></li><li><a href="module-Navbar.html">Navbar</a></li></ul><h3>Global</h3><ul><li><a href="global.html#api">api</a></li><li><a href="global.html#generatePDF">generatePDF</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Sat Feb 07 2026 12:47:04 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
